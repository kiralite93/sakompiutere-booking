<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Sakompiutere Gaming ‚Äî Booking</title>
  <meta name="theme-color" content="#0b1020" />
  <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>

  <!-- Firebase (compat, –ù–ï module) -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

  <style>
    :root{
      --bg:#070a12; --card:#0b1020; --muted:#9aa4bf; --text:#eaf0ff;
      --line:rgba(255,255,255,.08); --accent:#6ee7ff; --accent2:#a78bfa;
      --good:#34d399; --bad:#fb7185; --warn:#fbbf24;
      --shadow:0 20px 60px rgba(0,0,0,.55); --r:18px;
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      background:
        radial-gradient(1200px 800px at 20% -10%, rgba(110,231,255,.12), transparent 60%),
        radial-gradient(900px 700px at 80% 10%, rgba(167,139,250,.14), transparent 60%),
        radial-gradient(800px 700px at 40% 120%, rgba(52,211,153,.10), transparent 60%),
        var(--bg);
      color:var(--text);
    }
    .wrap{max-width:1180px; margin:0 auto; padding:18px;}
    header{
      display:flex; gap:14px; align-items:center; justify-content:space-between;
      padding:14px 16px; border:1px solid var(--line); border-radius:var(--r);
      background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
      box-shadow: var(--shadow);
      position:sticky; top:14px; z-index:10;
      backdrop-filter: blur(10px);
    }
    .brand{display:flex; gap:12px; align-items:center;}
    .logo{
      width:42px; height:42px; border-radius:14px;
      background: radial-gradient(circle at 30% 20%, rgba(110,231,255,.9), rgba(167,139,250,.8) 40%, rgba(0,0,0,0) 72%),
                  linear-gradient(180deg, rgba(255,255,255,.12), rgba(255,255,255,.02));
      border:1px solid var(--line);
      box-shadow: 0 12px 30px rgba(0,0,0,.4);
    }
    .brand h1{margin:0; font-size:16px; letter-spacing:.4px}
    .brand .sub{margin:0; color:var(--muted); font-size:12px}
    .rightbar{display:flex; gap:10px; flex-wrap:wrap; justify-content:flex-end; align-items:center;}
    .pill{
      padding:8px 10px; border-radius:999px; border:1px solid var(--line);
      background:rgba(255,255,255,.03);
      color:var(--muted); font-size:12px;
    }
    .pill strong{color:var(--text); font-weight:900}
    .grid{
      display:grid; grid-template-columns: 1.15fr .85fr; gap:18px; margin-top:16px;
    }
    @media (max-width: 980px){ .grid{grid-template-columns:1fr;} header{position:static;} }
    .card{
      border:1px solid var(--line); border-radius:var(--r);
      background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
      box-shadow: var(--shadow); overflow:hidden;
    }
    .hd{
      padding:14px 16px; display:flex; align-items:center; justify-content:space-between; gap:10px;
      border-bottom:1px solid var(--line);
    }
    .hd h2{margin:0; font-size:14px}
    .hint{color:var(--muted); font-size:12px}
    .bd{padding:14px 16px}
    .notice{
      border:1px dashed rgba(110,231,255,.35);
      background: rgba(110,231,255,.06);
      padding:12px 12px;
      border-radius:16px;
      font-size:12px;
      line-height:1.35;
    }
    .btns{display:flex; gap:10px; flex-wrap:wrap; margin-top:10px}
    button{
      border:1px solid var(--line);
      background:rgba(255,255,255,.04);
      color:var(--text);
      padding:10px 12px;
      border-radius:14px;
      cursor:pointer;
      font-weight:1000;
      letter-spacing:.2px;
    }
    button:hover{border-color: rgba(110,231,255,.5)}
    .primary{
      border-color: rgba(110,231,255,.55);
      background: linear-gradient(180deg, rgba(110,231,255,.18), rgba(167,139,250,.10));
    }
    .ghost{background:transparent}
    .danger{border-color: rgba(251,113,133,.6); background: rgba(251,113,133,.10)}
    .row{display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-bottom:10px;}
    @media (max-width:520px){ .row{grid-template-columns:1fr;} }
    label{display:block; font-size:12px; color:var(--muted); margin:0 0 6px}
    input, select{
      width:100%; padding:11px 12px; border-radius:14px; border:1px solid var(--line);
      background:rgba(0,0,0,.25); color:var(--text); outline:none;
    }
    .pcgrid{display:grid; grid-template-columns: repeat(5, 1fr); gap:10px; margin-top:10px;}
    @media (max-width: 980px){ .pcgrid{grid-template-columns: repeat(2, 1fr);} }
    .pc{
      padding:12px; border:1px solid var(--line); border-radius:16px;
      background:rgba(0,0,0,.22); cursor:pointer; user-select:none; position:relative;
      transition:.12s; min-height:72px;
    }
    .pc:hover{transform: translateY(-1px); border-color: rgba(110,231,255,.4)}
    .pc.selected{border-color: rgba(110,231,255,.75); box-shadow:0 0 0 3px rgba(110,231,255,.10)}
    .pc .name{font-weight:1100}
    .check{
      position:absolute; top:10px; right:10px;
      width:22px; height:22px; border-radius:999px;
      border:1px solid var(--line);
      display:grid; place-items:center;
      color: transparent;
      background: rgba(0,0,0,.35);
      font-weight:1100;
    }
    .pc.selected .check{color:var(--text); border-color: rgba(110,231,255,.75); background: rgba(110,231,255,.14)}
    .slotGrid{display:grid; grid-template-columns: repeat(4, 1fr); gap:10px; margin-top:10px;}
    @media (max-width: 980px){ .slotGrid{grid-template-columns: repeat(2, 1fr);} }
    .slot{
      border:1px solid var(--line); border-radius:16px; background:rgba(0,0,0,.22);
      padding:12px; cursor:pointer; user-select:none; transition:.12s; min-height:72px;
    }
    .slot:hover{transform: translateY(-1px); border-color: rgba(110,231,255,.4)}
    .slot.free{border-color: rgba(52,211,153,.45)}
    .slot.busy{border-color: rgba(251,113,133,.55)}
    .slot.selected{box-shadow:0 0 0 3px rgba(110,231,255,.10); border-color: rgba(110,231,255,.75)}
    .badge{padding:6px 10px; border-radius:999px; border:1px solid var(--line); background: rgba(0,0,0,.20); font-size:12px; font-weight:1100}
    .badge.ok{border-color: rgba(52,211,153,.35); color: rgba(52,211,153,.95)}
    .badge.bad{border-color: rgba(251,113,133,.35); color: rgba(251,113,133,.95)}
    .hide{display:none !important;}
    .footerbar{display:flex; justify-content:space-between; gap:10px; flex-wrap:wrap; margin-top:12px; color:var(--muted); font-size:12px;}
    .modalBack{position:fixed; inset:0; background:rgba(0,0,0,.55); display:none; align-items:center; justify-content:center; z-index:100; padding:18px;}
    .modalBack.show{display:flex;}
    .modal{width:min(520px, 100%); border:1px solid var(--line); border-radius:18px; background:linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02)); box-shadow: var(--shadow); overflow:hidden;}
    .modal .mh{padding:14px 16px; border-bottom:1px solid var(--line); display:flex; justify-content:space-between; align-items:center; gap:10px}
    .modal .mb{padding:14px 16px}
    .mut{color:var(--muted); font-size:12px}
    table{width:100%; border-collapse:separate; border-spacing:0; border:1px solid var(--line); border-radius:16px; overflow:hidden; margin-top:10px;}
    th,td{padding:10px; border-bottom:1px solid var(--line); font-size:12px; text-align:left;}
    th{color:var(--muted); background:rgba(255,255,255,.03)}
    tr:last-child td{border-bottom:none}
  </style>
</head>
<body>
<div class="wrap">
  <header>
    <div class="brand">
      <div class="logo"></div>
      <div>
        <h1>Sakompiutere Gaming ‚Äî Booking</h1>
        <p class="sub">–í—ã–±–µ—Ä–∏ –ü–ö ‚Üí –≤—ã–±–µ—Ä–∏ —Å–ª–æ—Ç ‚Üí –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</p>
      </div>
    </div>
    <div class="rightbar">
      <div class="pill">–†–µ–∂–∏–º: <strong id="modePill">DEMO</strong></div>
      <div class="pill">–ê–∫–∫–∞—É–Ω—Ç: <strong id="userPill">‚Äî</strong></div>
    </div>
  </header>

  <div class="grid">
    <div class="card">
      <div class="hd">
        <h2>–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ</h2>
        <div class="hint" id="topHint">–ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –∫–ª–∏–∫–∞–µ—Ç—Å—è ‚Äî –∑–Ω–∞—á–∏—Ç JS –Ω–µ –∑–∞–ø—É—Å—Ç–∏–ª—Å—è.</div>
      </div>
      <div class="bd">

        <div class="notice" id="introBox">
          <b>‚úÖ –î–æ–ª–∂–Ω–æ –∫–ª–∏–∫–∞—Ç—å—Å—è –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å</b><br/>
          –ù–∞–∂–º–∏ –∫–Ω–æ–ø–∫–∏ –Ω–∏–∂–µ. –ï—Å–ª–∏ –Ω–µ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç ‚Äî –æ—Ç–∫—Ä–æ–π —á–µ—Ä–µ–∑ <b>http://localhost</b>, –∞ –Ω–µ file://
          <div class="btns">
            <button class="primary" id="loginBtn">üîë –í–æ–π—Ç–∏ / –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
            <button class="primary" id="startBtn">‚ñ∂ –ù–∞—á–∞—Ç—å</button>
            <button class="ghost" id="myBtn">üë§ –ú–æ–∏ –±—Ä–æ–Ω–∏</button>
          </div>
          <div class="notice" style="margin-top:10px;">
            <b>–ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç:</b> –µ—Å–ª–∏ –ø–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–æ–∫ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –æ–∫–Ω–æ ‚Äî –≤—Å—ë –æ–∫.
          </div>
        </div>

        <div id="step1Box" class="hide">
          <div class="row">
            <div>
              <label>–î–∞—Ç–∞</label>
              <input id="date" type="date">
            </div>
            <div>
              <label>–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</label>
              <select id="slotLen">
                <option value="60">60 –º–∏–Ω—É—Ç</option>
                <option value="90">90 –º–∏–Ω—É—Ç</option>
                <option value="120">120 –º–∏–Ω—É—Ç</option>
              </select>
            </div>
          </div>

          <div class="hint">–í—ã–±–µ—Ä–∏ –ü–ö (–º–æ–∂–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ):</div>
          <div class="pcgrid" id="pcGrid"></div>

          <div class="btns">
            <button class="ghost" id="backBtn">‚¨Ö –ù–∞–∑–∞–¥</button>
            <button class="primary" id="toSlotsBtn">‚û° –°–ª–æ—Ç—ã</button>
          </div>
        </div>

        <div id="step2Box" class="hide">
          <div class="notice" id="slotHint">–í—ã–±–µ—Ä–∏ –∑–µ–ª—ë–Ω—ã–π —Å–ª–æ—Ç. –ö—Ä–∞—Å–Ω—ã–π ‚Äî –∑–∞–Ω—è—Ç–æ.</div>
          <div class="slotGrid" id="slotGrid"></div>
          <div class="btns">
            <button class="ghost" id="backToPcBtn">‚¨Ö –ù–∞–∑–∞–¥</button>
            <button class="primary" id="bookBtn">‚úÖ –ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å</button>
          </div>
          <div class="notice" id="msg" style="margin-top:10px;">‚Äî</div>
        </div>

        <div id="myBox" class="hide">
          <div class="btns">
            <button class="ghost" id="closeMyBtn">‚úñ –ó–∞–∫—Ä—ã—Ç—å</button>
          </div>
          <table>
            <thead>
              <tr><th>–î–∞—Ç–∞</th><th>–í—Ä–µ–º—è</th><th>–ü–ö</th><th>–û—Ç–º–µ–Ω–∞</th></tr>
            </thead>
            <tbody id="myTable"></tbody>
          </table>
        </div>

        <div class="footerbar">
          <div>–ï—Å–ª–∏ –æ—Ç–∫—Ä—ã–ª –∫–∞–∫ —Ñ–∞–π–ª: –ø–æ–ø—Ä–æ–±—É–π `python -m http.server 8080` –∏ `http://localhost:8080`</div>
          <div class="btns" style="margin:0">
            <button class="ghost" id="logoutBtn">üö´ Logout</button>
          </div>
        </div>

      </div>
    </div>

    <div class="card">
      <div class="hd">
        <h2>–ü–æ–¥—Å–∫–∞–∑–∫–∞</h2>
        <div class="hint">–ü–æ—á–µ–º—É ‚Äú–Ω–∏—á–µ–≥–æ –Ω–µ –∫–ª–∏–∫–∞–µ—Ç—Å—è‚Äù</div>
      </div>
      <div class="bd">
        <div class="notice">
          <b>90% —Å–ª—É—á–∞–µ–≤:</b> –æ—Ç–∫—Ä—ã—Ç `file:///.../index.html` –∏ –±—Ä–∞—É–∑–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç/–∏–º–ø–æ—Ä—Ç—ã.<br/><br/>
          ‚úÖ –û—Ç–∫—Ä–æ–π —á–µ—Ä–µ–∑ –ª–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä:<br/>
          1) `cmd` –≤ –ø–∞–ø–∫–µ<br/>
          2) `python -m http.server 8080`<br/>
          3) `http://localhost:8080/index.html`
        </div>
      </div>
    </div>
  </div>
</div>

<!-- AUTH MODAL -->
<div class="modalBack" id="authBack">
  <div class="modal">
    <div class="mh">
      <div><b>–ê–∫–∫–∞—É–Ω—Ç</b><div class="mut">DEMO: –º–æ–∂–Ω–æ –≤–≤–µ—Å—Ç–∏ –ª—é–±–æ–π email</div></div>
      <button id="authCloseBtn">‚úñ</button>
    </div>
    <div class="mb">
      <div class="row">
        <div>
          <label>Email</label>
          <input id="authEmail" type="email" placeholder="email@example.com">
        </div>
        <div>
          <label>Password</label>
          <input id="authPass" type="password" placeholder="******">
        </div>
      </div>
      <div class="btns">
        <button class="primary" id="doLoginBtn">–í–æ–π—Ç–∏</button>
        <button class="ghost" id="doRegisterBtn">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
      </div>
      <div class="notice" id="authMsg" style="margin-top:10px;">‚Äî</div>
    </div>
  </div>
</div>

<script>
(function(){
  const $ = (id)=>document.getElementById(id);
  const PCs = ["Bishop","Godzilla","Elf","Kadita","Orc","Lancelot","Fantomas","Soultaker","Pudge","Kratos"];

  // ======= Firebase config (–≤—Å—Ç–∞–≤–∏—à—å ‚Äî —Å—Ç–∞–Ω–µ—Ç CLOUD)
  const firebaseConfig = {
    // apiKey: "...",
    // authDomain: "...",
    // projectId: "...",
    // appId: "..."
  };

  let MODE = "DEMO";
  let app=null, auth=null, db=null;

  function isConfigFilled(cfg){
    return cfg && cfg.apiKey && cfg.projectId && cfg.appId;
  }

  // ======= Local DEMO storage
  const DEMO_KEY = "sg_demo_bookings";
  function loadDemo(){ try{return JSON.parse(localStorage.getItem(DEMO_KEY)||"[]")}catch{return []} }
  function saveDemo(list){ localStorage.setItem(DEMO_KEY, JSON.stringify(list||[])); }

  let user = null;
  let selectedPCs = new Set();
  let selectedSlot = null; // {start,end}

  function show(el){ el.classList.remove("hide"); }
  function hide(el){ el.classList.add("hide"); }

  function openAuth(){ $("authBack").classList.add("show"); $("authMsg").textContent = "‚Äî"; }
  function closeAuth(){ $("authBack").classList.remove("show"); }

  function setModePill(){
    $("modePill").textContent = MODE;
  }
  function setUserPill(){
    $("userPill").textContent = user ? (user.email || "user") : "‚Äî";
  }

  function initFirebaseIfPossible(){
    try{
      if(isConfigFilled(firebaseConfig)){
        firebase.initializeApp(firebaseConfig);
        auth = firebase.auth();
        db = firebase.firestore();
        MODE = "CLOUD";
      }else{
        MODE = "DEMO";
      }
    }catch(e){
      MODE = "DEMO";
    }
    setModePill();
  }

  function renderPCs(){
    const grid = $("pcGrid");
    grid.innerHTML = "";
    PCs.forEach(pc=>{
      const div = document.createElement("div");
      div.className = "pc" + (selectedPCs.has(pc) ? " selected":"");
      div.innerHTML = `<div class="check">‚úì</div><div class="name">${pc}</div>`;
      div.onclick = ()=>{
        if(selectedPCs.has(pc)) selectedPCs.delete(pc); else selectedPCs.add(pc);
        renderPCs();
      };
      grid.appendChild(div);
    });
  }

  function buildSlots(){
    const len = Number($("slotLen").value||60);
    const grid = $("slotGrid");
    grid.innerHTML = "";

    // –ø—Ä–æ—Å—Ç—ã–µ —Å–ª–æ—Ç—ã –Ω–∞ —Å–µ–≥–æ–¥–Ω—è: 12:00..22:00 —à–∞–≥ 30 –º–∏–Ω—É—Ç
    for(let m=12*60; m<=21*60; m+=30){
      const sH = String(Math.floor(m/60)).padStart(2,"0");
      const sM = String(m%60).padStart(2,"0");
      const e = m+len;
      const eH = String(Math.floor(e/60)).padStart(2,"0");
      const eM = String(e%60).padStart(2,"0");
      const slot = { start:`${sH}:${sM}`, end:`${eH}:${eM}` };

      const busy = false; // DEMO
      const div = document.createElement("div");
      div.className = "slot " + (busy ? "busy":"free") + (selectedSlot && selectedSlot.start===slot.start ? " selected":"");
      div.innerHTML = `<div><b>${slot.start} ‚Üí ${slot.end}</b></div><div style="margin-top:8px"><span class="badge ${busy?"bad":"ok"}">${busy?"BUSY":"FREE"}</span></div>`;
      div.onclick = ()=>{
        if(!user){ $("msg").textContent="–°–Ω–∞—á–∞–ª–∞ –≤–æ–π–¥–∏."; return; }
        if(selectedPCs.size===0){ $("msg").textContent="–í—ã–±–µ—Ä–∏ –ü–ö."; return; }
        selectedSlot = slot;
        buildSlots();
        $("msg").textContent = `–í—ã–±—Ä–∞–Ω–æ: ${slot.start} ‚Üí ${slot.end}`;
      };
      grid.appendChild(div);
    }
  }

  function renderMy(){
    const tbody = $("myTable");
    tbody.innerHTML = "";
    if(!user){ tbody.innerHTML = `<tr><td colspan="4" style="color:var(--muted)">Login first</td></tr>`; return; }

    const list = loadDemo().filter(x=>x.email===user.email);
    if(list.length===0){ tbody.innerHTML = `<tr><td colspan="4" style="color:var(--muted)">–ù–µ—Ç –±—Ä–æ–Ω–µ–π</td></tr>`; return; }

    list.forEach((b,idx)=>{
      const tr = document.createElement("tr");
      tr.innerHTML = `<td>${b.date}</td><td>${b.start}‚Üí${b.end}</td><td><b>${b.pcs.join(", ")}</b></td><td><button class="danger" data-i="${idx}">Cancel</button></td>`;
      tbody.appendChild(tr);
    });

    tbody.querySelectorAll("button[data-i]").forEach(btn=>{
      btn.onclick = ()=>{
        const i = Number(btn.getAttribute("data-i"));
        const all = loadDemo().filter(x=>x.email===user.email);
        // —á—Ç–æ–±—ã —É–¥–∞–ª–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ: –ø–µ—Ä–µ—Å–æ–±–µ—Ä—ë–º
        const full = loadDemo();
        let removed = 0;
        const next = full.filter(x=>{
          if(x.email!==user.email) return true;
          const keep = removed !== i;
          removed += 1;
          return keep;
        });
        saveDemo(next);
        renderMy();
      };
    });
  }

  // ======= Wire UI
  function boot(){
    initFirebaseIfPossible();

    // default date
    const d = new Date();
    const iso = d.toISOString().slice(0,10);
    $("date").value = iso;

    // Intro actions
    $("loginBtn").onclick = openAuth;
    $("startBtn").onclick = ()=>{
      hide($("introBox"));
      show($("step1Box"));
      renderPCs();
    };
    $("myBtn").onclick = ()=>{
      show($("myBox"));
      renderMy();
      $("myBox").scrollIntoView({behavior:"smooth", block:"start"});
    };

    // Step nav
    $("backBtn").onclick = ()=>{ show($("introBox")); hide($("step1Box")); hide($("step2Box")); };
    $("toSlotsBtn").onclick = ()=>{
      if(!user){ alert("–°–Ω–∞—á–∞–ª–∞ –≤–æ–π–¥–∏."); return; }
      hide($("step1Box")); show($("step2Box"));
      buildSlots();
      $("msg").textContent = "–í—ã–±–µ—Ä–∏ —Å–ª–æ—Ç.";
    };
    $("backToPcBtn").onclick = ()=>{ hide($("step2Box")); show($("step1Box")); };

    $("slotLen").onchange = ()=> buildSlots();

    $("bookBtn").onclick = ()=>{
      if(!user){ $("msg").textContent="–°–Ω–∞—á–∞–ª–∞ –≤–æ–π–¥–∏."; return; }
      if(selectedPCs.size===0){ $("msg").textContent="–í—ã–±–µ—Ä–∏ –ü–ö."; return; }
      if(!selectedSlot){ $("msg").textContent="–í—ã–±–µ—Ä–∏ —Å–ª–æ—Ç."; return; }

      const rec = {
        email: user.email,
        date: $("date").value,
        start: selectedSlot.start,
        end: selectedSlot.end,
        pcs: Array.from(selectedPCs),
        ts: Date.now()
      };

      const list = loadDemo();
      list.push(rec);
      saveDemo(list);

      $("msg").textContent = "‚úÖ –ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–æ (DEMO).";
    };

    // Auth modal
    $("authCloseBtn").onclick = closeAuth;
    $("authBack").onclick = (e)=>{ if(e.target===$("authBack")) closeAuth(); };

    $("doLoginBtn").onclick = ()=>{
      // DEMO login
      const email = ($("authEmail").value||"").trim();
      if(!email){ $("authMsg").textContent="–í–≤–µ–¥–∏ email"; return; }
      user = { email };
      setUserPill();
      $("authMsg").textContent="OK";
      closeAuth();
    };
    $("doRegisterBtn").onclick = ()=> $("doLoginBtn").onclick();

    $("logoutBtn").onclick = ()=>{
      user = null;
      selectedPCs.clear();
      selectedSlot = null;
      setUserPill();
      $("msg").textContent="‚Äî";
    };

    // show pills
    setModePill();
    setUserPill();
    $("topHint").textContent = "–ï—Å–ª–∏ –∫–Ω–æ–ø–∫–∏ —Ä–µ–∞–≥–∏—Ä—É—é—Ç ‚Äî –∑–Ω–∞—á–∏—Ç JS —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úÖ";
  }

  boot();
})();
</script>
</body>
</html>
